<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="btn">click em mim</button>
<script>
    // Lista de nomes dos alunos e status de presença (considerando que "4 Faltas" significa que a pessoa não está presente)
const baseUrlimg="./fotinhos/"
const alunos = [
  { matricula: "202221202818", nome: "ALVARO GABRIEL GOULART RODRIGUES", faltas: 0, foto: "./fotinhos/202221202818" },
  { matricula: "202311101454", nome: "ANA JULIA BERGAMO", faltas: 0, foto: "./fotinhos/202311101454" },
  { matricula: "202311100263", nome: "ARTHUR PEREIRA", faltas: 0, foto: "./fotinhos/202311100263" },
  { matricula: "202211400292", nome: "BENJAMIM SCHMITT BARRETO", faltas: 0, foto: "./fotinhos/202211400292" },
  { matricula: "202311101373", nome: "BIANCA JUNKES RECH", faltas: 2, foto: "./fotinhos/202311101373" },
  { matricula: "202311100301", nome: "CAMILA DE ASSUNCAO", faltas: 2, foto: "./fotinhos/202311100301" },
  { matricula: "202311100928", nome: "CLARA BIANCA KISTNER", faltas: 0, foto: "./fotinhos/202311100928" },
  { matricula: "202311100314", nome: "DANIEL STAMM PESSOA DE OLIVEIRA", faltas: 0, foto: "./fotinhos/202311100314" },
  { matricula: "202121500262", nome: "DIMITRI SCHMIDT", faltas: 0, foto: "./fotinhos/202121500262" },
  { matricula: "202311100911", nome: "EMANUEL DE OLIVEIRA FARIAS", faltas: 0, foto: "./fotinhos/202311100911" },
  { matricula: "202311101075", nome: "EMILY SIMAS DE SOUZA", faltas: 0, foto: "./fotinhos/202311101075" },
  { matricula: "202311101188", nome: "ENZO KIYOSHI ANAMI REIGOZA", faltas: 0, foto: "./fotinhos/202311101188" },
  { matricula: "202311100240", nome: "GABRIEL MENDES MOTTA", faltas: 0, foto: "./fotinhos/202311100240" },
  { matricula: "202311104312", nome: "GUSTAVO DANIEL DA SILVEIRA ALVES", faltas: 0, foto: "./fotinhos/202311104312" },
  { matricula: "202111700894", nome: "GUSTAVO GERMANO FERNANDES", faltas: 0, foto: "./fotinhos/202111700894" },
  { matricula: "202221202030", nome: "GUSTAVO GROCELLI ROSA", faltas: 2, foto: "./fotinhos/202221202030" },
  { matricula: "202311101414", nome: "GUSTAVO HEIDEN", faltas: 2, foto: "./fotinhos/202311101414" },
  { matricula: "202311102436", nome: "GUSTAVO KAUTZMANN LEMES DE CAMPOS", faltas: 2, foto: "./fotinhos/202311102436" },
  { matricula: "202311101470", nome: "GUSTAVO RIBEIRO GONCALVES BARBOSA", faltas: 0, foto: "./fotinhos/202311101470" },
  { matricula: "202311101623", nome: "GUSTAVO THEISS WILBERT", faltas: 0, foto: "./fotinhos/202311101623" },
  { matricula: "202311102030", nome: "HENRIQUE CONRADT DOS SANTOS", faltas: 0, foto: "./fotinhos/202311102030" },
  { matricula: "202211400229", nome: "HENRIQUE LORENZO HENRIQUES CABRAL DA SILVA", faltas: 0, foto: "./fotinhos/202211400229" },
  { matricula: "202311101189", nome: "ISABELLA ULLRICH", faltas: 2, foto: "./fotinhos/202311101189" },
  { matricula: "202221200414", nome: "JOÃO PEDRO PITZ", faltas: 0, foto: "./fotinhos/202221200414" },
  { matricula: "202221200446", nome: "JOSÉ OLÁVIO DA SILVA", faltas: 2, foto: "./fotinhos/202221200446" },
  { matricula: "202311101453", nome: "LEONARDO CORTELIM DOS SANTOS", faltas: 0, foto: "./fotinhos/202311101453" },
  { matricula: "202311100565", nome: "LIA BRORING FONTES SCHRAMM", faltas: 2, foto: "./fotinhos/202311100565" },
  { matricula: "202311102516", nome: "MAICO DA SILVA CORREA", faltas: 0, foto: "./fotinhos/202311102516" },
  { matricula: "202311101322", nome: "MARIA CLARA ADÃO", faltas: 2, foto: "./fotinhos/202311101322" },
  { matricula: "202311101490", nome: "NATAN JOÃO VANSUITA", faltas: 2, foto: "./fotinhos/202311101490" },
  { matricula: "202121500086", nome: "SAMUEL HENRIQUE KRAUSS", faltas: 4, foto: "./fotinhos/202121500086" },
  { matricula: "202311102531", nome: "SARAH MANUELA DE CARVALHO", faltas: 2, foto: "./fotinhos/202311102531" },
  { matricula: "202311100893", nome: "VINICIUS NUNES BISPO", faltas: 0, foto: "./fotinhos/202311100893" },
  { matricula: "202311102058", nome: "VINICIUS RAFAEL BATISTA", faltas: 2, foto: "./fotinhos/202311102058" },
  { matricula: "202311100872", nome: "VINICIUS STORCH", faltas: 0, foto: "./fotinhos/202311100872" },
  { matricula: "202311101183", nome: "VITOR FRANCISCO NICOLETTI DA ROSA", faltas: 0, foto: "./fotinhos/202311101183" },
  { matricula: "202311102145", nome: "VITOR HUGO PRANGE", faltas: 0, foto: "./fotinhos/202311102145" },
  { matricula: "202311101367", nome: "YAGO SCHRAMM DE SOUZA", faltas: 0, foto: "./fotinhos/202311101367" }
];

  let alunosSemFalta = alunos.filter(a => a.faltas === 0);
  const btn = document.querySelector("#btn");
  btn.addEventListener("click", () => {
    if (alunosSemFalta.length === 0) {
      alert("Todos já foram sorteados!");
      return;
    }

    const randomIndex = Math.floor(Math.random() * alunosSemFalta.length);
    const alunoSorteado = alunosSemFalta.splice(randomIndex, 1)[0];
    const paragrafo = document.createElement("p");
    const img = document.createElement("img");
    const basePath = (alunoSorteado.foto) ? alunoSorteado.foto : (baseUrlimg + alunoSorteado.matricula);
    img.src = basePath + ".jpg";
    img.alt = alunoSorteado.nome;
    img.style.width = "100px";
    img.style.height = "100px";

    
    img.onerror = () => {
      img.onerror = null; // evita loop
      img.src = basePath + ".png";
    };

    document.body.appendChild(img);

    const date = new Date();
    
    const probabilidadeProximo = (1 / (alunosSemFalta.length || 1)) * 100;

    paragrafo.innerText = `${date.toLocaleString('pt-BR')}: ${alunoSorteado.nome} (Probabilidade do próximo: ${probabilidadeProximo.toFixed(2)}%)`;
    document.body.appendChild(paragrafo);
  });
</script>
</body>
</html>